<!DOCTYPE html><HTML lang="en"><head><meta charset="UTF-8"/><meta content="width=device-width, initial-scale=1" name="viewport"/><link href="../../libs/highlight/github.min.css" rel="stylesheet"/><link href="../../css/franklin.css" rel="stylesheet"/><link href="../../css/minimal-mistakes.css" rel="stylesheet"/><link href="../../css/makie.css" rel="stylesheet"/><link href="../../assets/icon_transparent.png" rel="icon"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/brands.min.css" rel="stylesheet" type="text/css"/><title>Aspect ratio and size control tutorial</title></head><body class="layout--single"><div class="site-container"><div class="masthead"><div class="masthead__inner-wrap"><div class="masthead__menu"><nav class="greedy-nav" id="site-nav"><a class="title-icon" href="../.."><img src="../../assets/makie_logo_transparent.svg"/></a><ul class="visible-links"><li class="masthead__menu-item"><a href="https://github.com/JuliaPlots/Makie.jl"><img class="masthead-icon" src="../../assets/GitHub-Mark-64px.png"/></a></li><li class="masthead__menu-item"><a href="../../examples/">Examples</a></li><li class="masthead__menu-item"><a href="..">Tutorials</a></li><li class="masthead__menu-item"><a href="../../documentation/">Documentation</a></li></ul><button class="greedy-nav__toggle" type="button"><span class="visually-hidden">Toggle menu</span><div class="navicon"></div></button><ul class="hidden-links hidden"></ul></nav></div></div></div><div id="main" role="main"><div id="overlay"></div><div id="navbar-container"><div id="navbar"><form action="../../search/index.html" id="lunrSearchForm" name="lunrSearchForm"><input class="search-input" name="q" placeholder="Search docs" type="text"/></form><h1>Navigation</h1><ul><li><div class="tocitem-container"><a href="../..">Home</a></div></li><li><input class="collapse-toggle" id="menuitem-2" type="checkbox"/><div class="tocitem-container"><label class="tocexpander" for="menuitem-2"><i class="docs-chevron"></i></label><a href="../../examples">Examples</a></div><ul><li><input class="collapse-toggle" id="menuitem-2-1" type="checkbox"/><div class="tocitem-container"><label class="tocexpander" for="menuitem-2-1"><i class="docs-chevron"></i></label><a href="../../examples/layoutables">Layoutables &amp; Widgets</a></div><ul><li><div class="tocitem-container"><a href="../../examples/layoutables/axis">Axis</a></div></li><li><div class="tocitem-container"><a href="../../examples/layoutables/axis3">Axis3</a></div></li><li><div class="tocitem-container"><a href="../../examples/layoutables/box">Box</a></div></li><li><div class="tocitem-container"><a href="../../examples/layoutables/button">Button</a></div></li><li><div class="tocitem-container"><a href="../../examples/layoutables/colorbar">Colorbar</a></div></li><li><div class="tocitem-container"><a href="../../examples/layoutables/gridlayout">GridLayout</a></div></li><li><div class="tocitem-container"><a href="../../examples/layoutables/intervalslider">IntervalSlider</a></div></li><li><div class="tocitem-container"><a href="../../examples/layoutables/label">Label</a></div></li><li><div class="tocitem-container"><a href="../../examples/layoutables/legend">Legend</a></div></li><li><div class="tocitem-container"><a href="../../examples/layoutables/lscene">LScene</a></div></li><li><div class="tocitem-container"><a href="../../examples/layoutables/menu">Menu</a></div></li><li><div class="tocitem-container"><a href="../../examples/layoutables/slider">Slider</a></div></li><li><div class="tocitem-container"><a href="../../examples/layoutables/textbox">Textbox</a></div></li><li><div class="tocitem-container"><a href="../../examples/layoutables/toggle">Toggle</a></div></li></ul></li><li><input class="collapse-toggle" id="menuitem-2-2" type="checkbox"/><div class="tocitem-container"><label class="tocexpander" for="menuitem-2-2"><i class="docs-chevron"></i></label><a href="../../examples/plotting_functions">Plotting functions</a></div><ul><li><div class="tocitem-container"><a href="../../examples/plotting_functions/abline">abline!</a></div></li><li><div class="tocitem-container"><a href="../../examples/plotting_functions/arrows">arrows</a></div></li><li><div class="tocitem-container"><a href="../../examples/plotting_functions/band">band</a></div></li><li><div class="tocitem-container"><a href="../../examples/plotting_functions/barplot">barplot</a></div></li><li><div class="tocitem-container"><a href="../../examples/plotting_functions/boxplot">boxplot</a></div></li><li><div class="tocitem-container"><a href="../../examples/plotting_functions/contour">contour</a></div></li><li><div class="tocitem-container"><a href="../../examples/plotting_functions/contourf">contourf</a></div></li><li><div class="tocitem-container"><a href="../../examples/plotting_functions/crossbar">crossbar</a></div></li><li><div class="tocitem-container"><a href="../../examples/plotting_functions/density">density</a></div></li><li><div class="tocitem-container"><a href="../../examples/plotting_functions/ecdf">ecdfplot</a></div></li><li><div class="tocitem-container"><a href="../../examples/plotting_functions/errorbars">errorbars</a></div></li><li><div class="tocitem-container"><a href="../../examples/plotting_functions/heatmap">heatmap</a></div></li><li><div class="tocitem-container"><a href="../../examples/plotting_functions/hist">hist</a></div></li><li><div class="tocitem-container"><a href="../../examples/plotting_functions/hvlines">hlines! and vlines!</a></div></li><li><div class="tocitem-container"><a href="../../examples/plotting_functions/hvspan">hspan! and vspan!</a></div></li><li><div class="tocitem-container"><a href="../../examples/plotting_functions/image">image</a></div></li><li><div class="tocitem-container"><a href="../../examples/plotting_functions/lines">lines</a></div></li><li><div class="tocitem-container"><a href="../../examples/plotting_functions/linesegments">linesegments</a></div></li><li><div class="tocitem-container"><a href="../../examples/plotting_functions/mesh">mesh</a></div></li><li><div class="tocitem-container"><a href="../../examples/plotting_functions/meshscatter">meshscatter</a></div></li><li><div class="tocitem-container"><a href="../../examples/plotting_functions/pie">pie</a></div></li><li><div class="tocitem-container"><a href="../../examples/plotting_functions/poly">poly</a></div></li><li><div class="tocitem-container"><a href="../../examples/plotting_functions/qqplot">qqplot and qqnorm</a></div></li><li><div class="tocitem-container"><a href="../../examples/plotting_functions/rangebars">rangebars</a></div></li><li><div class="tocitem-container"><a href="../../examples/plotting_functions/scatter">scatter</a></div></li><li><div class="tocitem-container"><a href="../../examples/plotting_functions/scatterlines">scatterlines</a></div></li><li><div class="tocitem-container"><a href="../../examples/plotting_functions/series">series</a></div></li><li><div class="tocitem-container"><a href="../../examples/plotting_functions/spy">spy</a></div></li><li><div class="tocitem-container"><a href="../../examples/plotting_functions/stairs">stairs</a></div></li><li><div class="tocitem-container"><a href="../../examples/plotting_functions/stem">stem</a></div></li><li><div class="tocitem-container"><a href="../../examples/plotting_functions/streamplot">streamplot</a></div></li><li><div class="tocitem-container"><a href="../../examples/plotting_functions/surface">surface</a></div></li><li><div class="tocitem-container"><a href="../../examples/plotting_functions/text">text</a></div></li><li><div class="tocitem-container"><a href="../../examples/plotting_functions/violin">violin</a></div></li><li><div class="tocitem-container"><a href="../../examples/plotting_functions/volume">volume</a></div></li><li><div class="tocitem-container"><a href="../../examples/plotting_functions/volumeslices">volumeslices</a></div></li><li><div class="tocitem-container"><a href="../../examples/plotting_functions/wireframe">wireframe</a></div></li></ul></li></ul></li><li><input checked="" class="collapse-toggle" id="menuitem-3" type="checkbox"/><div class="tocitem-container"><label class="tocexpander" for="menuitem-3"><i class="docs-chevron"></i></label><a href="..">Tutorials</a></div><ul><li><div class="tocitem-container"><a class="active" href="">Aspect ratio and size control tutorial</a></div><ul class="page-content"><li><a href="#aspect_ratio_and_size_control_tutorial">Aspect ratio and size control tutorial</a></li></ul></li><li><div class="tocitem-container"><a href="../basic-tutorial">Basic Tutorial</a></div></li><li><div class="tocitem-container"><a href="../layout-tutorial">Layout Tutorial</a></div></li><li><div class="tocitem-container"><a href="../scenes">Scene tutorial</a></div></li></ul></li><li><input class="collapse-toggle" id="menuitem-4" type="checkbox"/><div class="tocitem-container"><label class="tocexpander" for="menuitem-4"><i class="docs-chevron"></i></label><a href="../../documentation">Documentation</a></div><ul><li><div class="tocitem-container"><a href="../../documentation/api_reference">API reference</a></div></li><li><div class="tocitem-container"><a href="../../documentation/animation">Animations</a></div></li><li><input class="collapse-toggle" id="menuitem-4-3" type="checkbox"/><div class="tocitem-container"><label class="tocexpander" for="menuitem-4-3"><i class="docs-chevron"></i></label><a href="../../documentation/backends">Backends</a></div><ul><li><div class="tocitem-container"><a href="../../documentation/backends/cairomakie">CairoMakie</a></div></li><li><div class="tocitem-container"><a href="../../documentation/backends/glmakie">GLMakie</a></div></li><li><div class="tocitem-container"><a href="../../documentation/backends/rprmakie">RPRMakie</a></div></li><li><div class="tocitem-container"><a href="../../documentation/backends/wglmakie">WGLMakie</a></div></li></ul></li><li><div class="tocitem-container"><a href="../../documentation/cameras">Cameras</a></div></li><li><div class="tocitem-container"><a href="../../documentation/colors">Colors</a></div></li><li><div class="tocitem-container"><a href="../../documentation/events">Events</a></div></li><li><div class="tocitem-container"><a href="../../documentation/faq">Frequently Asked Questions</a></div></li><li><div class="tocitem-container"><a href="../../documentation/figure">Figures</a></div></li><li><div class="tocitem-container"><a href="../../documentation/figure_size">Exporting a Figure with physical dimensions</a></div></li><li><div class="tocitem-container"><a href="../../documentation/headless">Headless</a></div></li><li><div class="tocitem-container"><a href="../../documentation/inspector">Inspecting Data</a></div></li><li><div class="tocitem-container"><a href="../../documentation/latex">LaTeX</a></div></li><li><div class="tocitem-container"><a href="../../documentation/layoutables">Layoutables</a></div></li><li><div class="tocitem-container"><a href="../../documentation/layouting">How layouts work</a></div></li><li><div class="tocitem-container"><a href="../../documentation/lighting">Lighting</a></div></li><li><div class="tocitem-container"><a href="../../documentation/news">News</a></div></li><li><div class="tocitem-container"><a href="../../documentation/nodes">Observables &amp; Interaction</a></div></li><li><div class="tocitem-container"><a href="../../documentation/plot_method_signatures">Plot Method Signatures</a></div></li><li><div class="tocitem-container"><a href="../../documentation/recipes">Plot Recipes</a></div></li><li><div class="tocitem-container"><a href="../../documentation/scenes">Scenes</a></div></li><li><input class="collapse-toggle" id="menuitem-4-21" type="checkbox"/><div class="tocitem-container"><label class="tocexpander" for="menuitem-4-21"><i class="docs-chevron"></i></label><a href="../../documentation/theming">Theming</a></div><ul><li><div class="tocitem-container"><a href="../../documentation/theming/predefined_themes">Predefined themes</a></div></li></ul></li><li><div class="tocitem-container"><a href="../../documentation/transparency">Basic transparency</a></div></li></ul></li></ul></div></div><div class="franklin-content"><h1 id="aspect_ratio_and_size_control_tutorial"><a class="header-anchor" href="#aspect_ratio_and_size_control_tutorial">Aspect ratio and size control tutorial</a></h1><p>A very common problem in plotting is dealing with aspect ratios and other ways to precisely control figures.</p><p>For example, many plots need square axes. If you have looked at the documentation of <code>Axis</code>, you might know that it has an <code>aspect</code> attribute that can control the aspect ratio of the axis box. This aspect is not concerned with what the data limits are, it's just about the relative visual length of the axes.</p><p>Let's look at one common example, a square axis with a colorbar next to it:</p><pre><code class="language-julia">using CairoMakie

set_theme!(backgroundcolor = :gray90)

f = Figure(resolution = (800, 500))
ax = Axis(f[1, 1], aspect = 1)
Colorbar(f[1, 2])
f</code></pre><p></p><p><a id="example_7161082110194571875"><img alt="" src="../../assets/tutorials/aspect-tutorial/code/output/example_7161082110194571875.svg"/></a></p><p>As you can see, the axis is square, but there's also a large gap between it and the colorbar. Why is that?</p><p>We can visualize the reason by adding a Box to the same cell where the axis is:</p><pre><code class="language-julia">Box(f[1, 1], color = (:red, 0.2), strokewidth = 0)
f</code></pre><p></p><p><a id="aspect_tutorial_example"><img alt="" src="../../assets/tutorials/aspect-tutorial/code/output/aspect_tutorial_example.svg"/></a></p><p>The red area of the box extends out into the whitespace left by the Axis. This demonstrates what the <code>aspect</code> keyword is actually doing. It reduces the size of the Axis, such that the chosen aspect ratio is achieved. It doesn't tell the layout that the Axis lives in "please make this cell adhere to this aspect ratio". As far as the layout is concerned, the Axis has an undefined size and its layout cell can therefore have any size that the layout deems correct, based on all other content of the layout and the figure size.</p><p>Therefore, using <code>aspect</code> will always cause gaps, unless the layout cell where the Axis lives happens to have exactly the correct aspect ratio by chance. This means <code>aspect</code> should only be used if the whitespace caused by it does not matter too much.</p><p>For all other cases, there is a different approach.</p><p>We want to force the layout to keep the axis cell at a specific aspect ratio. Therefore, we have to manipulate the layout itself, not the axis.</p><p>By default, each GridLayout row and column has a size of <code>Auto()</code>. This means that the size can depend on fixed-size content if there is any, otherwise it expands to fill the available space. If we want to force a cell to have an aspect ratio, we need to set either its respective row or column size to <code>Aspect</code>.</p><p>Let's try the example from above again, but this time we force the column of the Axis to have an aspect ratio of 1.0 relative to the row of the Axis, which is row 1.</p><pre><code class="language-julia">f = Figure(resolution = (800, 500))
ax = Axis(f[1, 1])
Colorbar(f[1, 2])
colsize!(f.layout, 1, Aspect(1, 1.0))
f</code></pre><p></p><p><a id="example_2418299792394839457"><img alt="" src="../../assets/tutorials/aspect-tutorial/code/output/example_2418299792394839457.svg"/></a></p><p>As you can see, this time the colorbar sticks close to the axis, there is no unnecessary whitespace between them. We can visualize the effect of <code>Aspect</code> again with a red box, that shows us the extent of the layout cell:</p><pre><code class="language-julia">Box(f[1, 1], color = (:red, 0.2), strokewidth = 0)
f</code></pre><p></p><p><a id="example_5656392007283475632"><img alt="" src="../../assets/tutorials/aspect-tutorial/code/output/example_5656392007283475632.svg"/></a></p><p>So this time the layout cell itself is square, therefore the Axis that fills it is also square. Let me just demonstrate that we can play the same game again and give the Axis an <code>aspect</code> that is different from the square one that the layout cell has. This will again cause unnecessary whitespace:</p><pre><code class="language-julia">ax.aspect = 0.5
f</code></pre><p></p><p><a id="example_12979478477620724169"><img alt="" src="../../assets/tutorials/aspect-tutorial/code/output/example_12979478477620724169.svg"/></a></p><p>And now we change the column aspect again, to remove this gap:</p><pre><code class="language-julia">colsize!(f.layout, 1, Aspect(1, 0.5))
f</code></pre><p></p><p><a id="example_5292019659179490479"><img alt="" src="../../assets/tutorials/aspect-tutorial/code/output/example_5292019659179490479.svg"/></a></p><p>Let's return to our previous state with a square axis:</p><pre><code class="language-julia">f = Figure(resolution = (800, 500))
ax = Axis(f[1, 1])
Colorbar(f[1, 2])
colsize!(f.layout, 1, Aspect(1, 1.0))
f</code></pre><p></p><p><a id="example_16524080032867734613"><img alt="" src="../../assets/tutorials/aspect-tutorial/code/output/example_16524080032867734613.svg"/></a></p><p>Now you might think that there is no whitespace anymore between Axis and Colorbar, but there is a lot of it to the left and the right. Why can the layout not fix this problem for us?</p><p>Well, in Makie, the layout has to operate within the confines of the figure size that we have set. It cannot just decrease the figure size if there's too little content. This is because lots of times, figures are created to fit the sizing rules of some academic journal exactly, therefore the content you plot is not allowed to mess with the figure size.</p><p>So what we have done in our example is introducing constraints to the sizes of objects in our layout, such that it's impossible to fill all the space that is theoretically available. If you think about it, it's impossible to fill this Figure with a square axis and a thin colorbar while filling the rectangular space. We need a smaller figure!</p><p>But how small should it be exactly? It would be quite difficult to eyeball this, but thankfully there's a function for this exact purpose. By calling <code>resize_to_layout!</code>, we can adjust the figure size to the size that the layout needs for all its content.</p><p>Let's try it out:</p><pre><code class="language-julia">resize_to_layout!(f)
f</code></pre><p></p><p><a id="example_18306201722621179310"><img alt="" src="../../assets/tutorials/aspect-tutorial/code/output/example_18306201722621179310.svg"/></a></p><p>As you can see, the whitespace at the sides has been trimmed. (If the scaling looks smaller or bigger, that is just because of the display on this site, not the underlying figure size).</p><p>This technique is useful for all kinds of situations where the content should decide the figure size, and not the other way around.</p><p>For example, let's say we have a facet plot with 25 square axes which are all of size 150 by 150. We can just make these axes with fixed widths and heights. The <code>Auto</code> sized columns and rows of the default layout pick up these measurements and adjust themselves accordingly.</p><p>Of course, the figure size will by default not be appropriate for such an arrangement, and the content will clip:</p><pre><code class="language-julia">f = Figure()
for i in 1:5, j in 1:5
    Axis(f[i, j], width = 150, height = 150)
end
f</code></pre><p></p><p><a id="example_18284665317451857358"><img alt="" src="../../assets/tutorials/aspect-tutorial/code/output/example_18284665317451857358.svg"/></a></p><p>But like before we can call <code>resize_to_layout!</code> and the size will be corrected so no clipping occurs.</p><pre><code class="language-julia">resize_to_layout!(f)
f</code></pre><p></p><p><a id="example_14353287246861631604"><img alt="" src="../../assets/tutorials/aspect-tutorial/code/output/example_14353287246861631604.svg"/></a></p><div class="page-foot"><div class="copyright">
    © Makie.jl. Last modified: March 15, 2022. Website built with <a href="https://github.com/tlienart/Franklin.jl">Franklin.jl</a> and the <a href="https://julialang.org">Julia programming language</a>.
      <p>These docs were autogenerated using Makie: v0.16.6, GLMakie: v0.5.5, CairoMakie: v0.7.5, WGLMakie: v0.5.5</p></div></div></div></div><div class="page__footer"><footer><div class="page__footer-follow"><ul class="social-icons"><li><a href="https://twitter.com/MakiePlots" rel="nofollow noopener noreferrer"><i aria-hidden="true" class="fab fa-fw fa-twitter-square"></i> Twitter</a></li><li><a href="https://github.com/JuliaPlots/Makie.jl" rel="nofollow noopener noreferrer"><i aria-hidden="true" class="fab fa-fw fa-github"></i> GitHub</a></li></ul></div><div class="page__footer-copyright">© Makie.jl. Powered by <a href="https://github.com/tlienart/Franklin.jl">Franklin</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div></footer></div></div><script src="../../libs/navbar.js"></script><script src="../../libs/lunr/lunr.min.js"></script><script src="../../libs/lunr/lunr_index.js"></script><script src="../../libs/lunr/lunrclient.min.js"></script><script crossorigin="anonymous" defer="" integrity="sha384-DJ25uNYET2XCl5ZF++U8eNxPWqcKohUUBUpKGlNLMchM7q4Wjg2CUpjHLaL8yYPH" src="https://use.fontawesome.com/releases/v5.8.2/js/all.js"></script><script src="../../libs/highlight/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();hljs.configure({tabReplace: '    '});</script></body></HTML>